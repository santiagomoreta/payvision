"use strict";var payVisionApp=angular.module("payVisionApp",[]);payVisionApp.controller("mainController",["$scope","$filter","mainService",function($scope,$filter,mainService){$scope.init=function(){$scope.transactionTypes=[{id:"0",name:"Transaction type"},{id:"1",name:"Payment"},{id:"2",name:"Authorize"},{id:"3",name:"Credit"}],$scope.Currencys=[{id:"0",name:"Currency"},{id:"1",name:"USD"},{id:"2",name:"EUR"},{id:"3",name:"GBP"}],$scope.CreditCards=function(){},$scope.getTransactions()},$scope.getTransactions=function(){mainService.getTransactions({}).then(function(data){$scope.transactionsData=data,$scope.transactionsDataAux=data},function(error){})},$scope.transactionFilter=function(data,filtro){return $filter("filter")(data,function(item){return filtro.toLowerCase()==item.action.toLowerCase()})},$scope.currencyFilter=function(data,filtro){return $filter("filter")(data,function(item){return filtro.toLowerCase()==item.currencyCode.toLowerCase()})},$scope.search=function(){if("Transaction type"==$scope.transactionType&&"Currency"==$scope.currency)$scope.transactionsData=$scope.transactionsDataAux;else if("Currency"!=$scope.currency&&($scope.transactionsData=$scope.currencyFilter($scope.transactionsDataAux,$scope.currency)),"Transaction type"!=$scope.transactionType&&($scope.transactionsData=$scope.transactionFilter($scope.transactionsDataAux,$scope.transactionType)),"Currency"!=$scope.currency&&"Transaction type"!=$scope.transactionType){var aux=$scope.transactionFilter($scope.transactionsDataAux,$scope.transactionType);$scope.transactionsData=$scope.currencyFilter(aux,$scope.currency)}}}]),payVisionApp.factory("mainService",["$q","mainModel",function($q,mainModel){var mainService={getTransactions:function(getTransactions_IN){var deferred=$q.defer();return mainModel.getTransactions(getTransactions_IN).success(function(data,status){deferred.resolve(data)}).error(function(data,status){deferred.reject(data)}),deferred.promise}};return mainService}]),payVisionApp.factory("mainModel",["$http",function($http){var mainModel={getTransactions:function(getTransactions_IN){return $http.get("https://jovs5zmau3.execute-api.eu-west-1.amazonaws.com/prod/transactions",{headers:{authorization:"Basic Y29kZS1jaGFsbGVuZ2U6cGF5dmlzaW9uZXI=","Content-Type":"application/json"}})}};return mainModel}]);